{"swagger": "2.0", "info": {"title": "API for WINK", "description": "none", "contact": {"email": "work80@mail.ru"}, "serviceIdentity": false, "url": "http://127.0.0.1:8000/api/v1", "version": "v1"}, "host": "127.0.0.1:8000", "schemes": ["http"], "basePath": "/api/v1", "consumes": ["application/json"], "produces": ["application/json"], "securityDefinitions": {"Bearer": {"type": "apiKey", "name": "Authorization", "in": "header"}}, "security": [{"Bearer": []}], "paths": {"/auth/csrftoken/": {"get": {"operationId": "auth_csrftoken_list", "description": "csrf-token", "parameters": [], "responses": {"200": {"description": "CSRF токен", "headers": {"Set-Cookie": {"description": "CSRF token cookie", "type": "string", "example": "csrftoken=GiehvEXjNiYqp3bOVtA...; Path=/; Secure; HttpOnly; SameSite=Lax"}}}}, "tags": ["csrf"]}, "parameters": []}, "/business/business/": {"get": {"operationId": "business_business_list", "description": "\nПолучение списка бизнес-элементов с пагинацией.\n\n**Требования к доступу:**\n- Только пользователи с ролью Manager или Admin\n- Активный аккаунт\n\n**Параметры пагинации:**\n- `page`: Номер страницы (начиная с 1)\n- `page_size`: Количество элементов на странице (по умолчанию определяется в настройках DRF, обычно 10)\n\n**Структура ответа:**\n- `data`: Массив бизнес-элементов текущей страницы\n- `pagination`: Метаданные пагинации с информацией о текущей странице, общем количестве страниц и элементов\n\n**Пример запроса:**\n```\nGET /api/dashboard/?page=1&page_size=50\n```\n", "parameters": [{"name": "page", "in": "query", "description": "Номер запрашиваемой страницы (начиная с 1). Если не указан, возвращается первая страница.", "required": false, "type": "integer", "default": 1, "example": 1}, {"name": "page_size", "in": "query", "description": "Количество элементов на странице. Если не указан, используется значение по умолчанию из настроек DRF. Для получения 50 записей как указано в требованиях, установите значение 50.", "required": false, "type": "integer", "example": 50}, {"name": "ordering", "in": "query", "description": "Поле для сортировки результатов. Для сортировки по убыванию добавьте '-' перед названием поля. Примеры: 'created_at', '-name'", "required": false, "type": "string", "example": "created_at"}, {"name": "search", "in": "query", "description": "Поиск по всем текстовым полям модели", "required": false, "type": "string", "example": "название элемента"}, {"name": "Authorization", "in": "header", "description": "Токен аутентификации в формате 'Bearer <token>'. Требуется для всех запросов.", "required": true, "type": "string", "example": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}], "responses": {"200": {"description": "Успешный ответ со списком элементов и метаданными пагинации", "schema": {"type": "object", "properties": {"count": {"description": "Общее количество элементов", "type": "integer", "example": 487}, "next": {"description": "URL следующей страницы (если есть)", "type": "string", "example": "http://api.example.com/dashboard/?page=2", "nullable": true}, "previous": {"description": "URL предыдущей страницы (если есть)", "type": "string", "nullable": true}, "results": {"description": "Массив бизнес-элементов текущей страницы", "type": "array", "items": {"type": "object", "properties": {"id": {"description": "UUID элемента", "type": "string", "example": "c4ebb722-930d-4ad9-ad1e-237eb4b41c70"}, "name": {"description": "Название бизнес-элемента", "type": "string", "example": "Название бизнес-элемента"}, "description": {"description": "Описание элемента", "type": "string", "example": "Подробное описание бизнес-элемента", "nullable": true}, "created_at": {"description": "Дата и время создания", "type": "string", "format": "date-time", "example": "2024-01-15T10:30:00Z"}, "updated_at": {"description": "Дата и время последнего обновления", "type": "string", "format": "date-time", "example": "2024-01-15T10:30:00Z"}, "is_active": {"description": "Статус активности элемента", "type": "boolean", "example": true}}}}}}}, "400": {"description": "Некорректные параметры запроса", "schema": {"type": "object", "properties": {"data": {"description": "Сообщение об ошибке", "type": "string", "example": "Invalid page number. Page number must be an integer."}, "error": {"description": "Детали ошибки", "type": "string", "example": "Page number must be an integer", "nullable": true}}}}, "401": {"description": "Неавторизованный доступ - недостаточно прав", "schema": {"type": "object", "properties": {"data": {"description": "Сообщение об ошибке", "type": "string", "example": "Not OK - you do not have sufficient rights"}}}}, "403": {"description": "Доступ запрещен - аккаунт не активирован", "schema": {"type": "object", "properties": {"data": {"description": "Сообщение об ошибке", "type": "string", "example": "Your account needs to be activated"}}}}, "404": {"description": "Страница не найдена", "schema": {"type": "object", "properties": {"data": {"description": "Сообщение об ошибке", "type": "string", "example": "Page not found"}, "error": {"description": "Детали ошибки", "type": "string", "example": "Requested page does not exist", "nullable": true}}}}, "500": {"description": "Внутренняя ошибка сервера", "schema": {"type": "object", "properties": {"data": {"description": "Сообщение об ошибке", "type": "string", "example": "Internal server error"}, "error": {"description": "Детали ошибки", "type": "string", "example": "Database connection failed", "nullable": true}}}}}, "tags": ["business"]}, "post": {"operationId": "business_business_create", "description": "", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Business"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/Business"}}}, "tags": ["business"]}, "parameters": []}, "/business/business/{id}/": {"get": {"operationId": "business_business_read", "description": "", "parameters": [], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Business"}}}, "tags": ["business"]}, "put": {"operationId": "business_business_update", "description": "", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Business"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Business"}}}, "tags": ["business"]}, "patch": {"operationId": "business_business_partial_update", "description": "", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Business"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Business"}}}, "tags": ["business"]}, "delete": {"operationId": "business_business_delete", "description": "", "parameters": [], "responses": {"204": {"description": ""}}, "tags": ["business"]}, "parameters": [{"name": "id", "in": "path", "description": "A unique value identifying this business element.", "required": true, "type": "string"}]}, "/person/0/active/": {"patch": {"operationId": "person_0_active", "description": "\"\n    TODO: Для 'BlackListModel' наладить CRUD для возвращения пользователю аккаунт.\n        Запрос на удаление аккаунта, добавляет аккаунт в чёрный список - 'BlackListModel' db. После,\n         пользователь не может авторизоваться.\n        Повторный запрос на удаление аккаунта (от пользователя с правами администратора и супервользователя)\n        удаляет аккаунт из db.\n    Если раннее проводилась попытка - удалить аккаунт, необходимы права              администратора - удалить (вручную) email из 'BlackListModel' db.\n     После этого пользователь может активироваться.\n    Cooockie содержит два токенаЖ\n    - access;\n    - refresh;\n    :return ```text\n     {\n        \"data\": {\n            \"id\": \"c4ebb722-930d-4ad9-ad1e-237eb4b41c70\",\n            \"email\": \"gKU@mail.ru\",\n            \"role\": \"Role: staff\",\n            \"last_login\": null,\n            \"is_superuser\": false,\n            \"is_staff\": true,\n            \"date_joined\": \"2025-12-01T15:57:02.286616+07:00\",\n            \"created_at\": \"2025-12-01T15:57:02.286726+07:00\",\n            \"updated_at\": \"2025-12-01T15:57:40.922670+07:00\",\n            \"username\": \"Gku\",\n            \"first_name\": null,\n            \"last_name\": null,\n            \"status\": \"PROCESS\",\n            \"refer\": \"c9b0fa36-210b-4095-8cb3-5b21bf04f953\",\n            \"is_sent\": false,\n            \"is_active\": true,\n            \"is_verified\": false,\n            \"is_admin\": false,\n            \"groups\": [\n                3\n            ],\n            \"user_permissions\": []\n        },\n        \"access\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzY0NjY4MjgzLCJpYXQiOjE3NjQ1ODE4ODMsImp0aSI6IjFlOTJkYTg2OTg2YzQ3MjhhMjk0OTdjZDM4NDA1ZDA1IiwiZW1haWwiOiJnS1VAbWFpbC5ydSIsImlkIjoiYzRlYmI3MjItOTMwZC00YWQ5LWFkMWUtMjM3ZWI0YjQxYzcwIn0.u1JyXXHVFRvCnZIO95vRlLZ0-UbntTEFQUYQ5bOM2GM\",\n        \"refresh\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoicmVmcmVzaCIsImV4cCI6MTc2NDY2ODI4MCwiaWF0IjoxNzY0NTgxODgwLCJqdGkiOiI2Y2I0MmE4NS0zYWY0LTQ1YWUtYTc4MC00YzUyODVkYzcwYjMiLCJ1c2VyX2lkIjoiYzRlYmI3MjItOTMwZC00YWQ5LWFkMWUtMjM3ZWI0YjQxYzcwIiwiYWNjZXNzX3Rva2VuIjoiZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SjBiMnRsYmw5MGVYQmxJam9pWVdOalpYTnpJaXdpWlhod0lqb3hOelkwTmpZNE1qZ3pMQ0pwWVhRaU9qRTNOalExT0RFNE9ETXNJbXAwYVNJNklqRmxPVEprWVRnMk9UZzJZelEzTWpoaE1qazBPVGRqWkRNNE5EQTFaREExSWl3aVpXMWhhV3dpT2lKblMxVkFiV0ZwYkM1eWRTSXNJbWxrSWpvaVl6UmxZbUkzTWpJdE9UTXdaQzAwWVdRNUxXRmtNV1V0TWpNM1pXSTBZalF4WXpjd0luMC51MUp5WFhIVkZSdkNuWklPOTV2UmxMWjAtVWJudFRFRlFVWVE1Yk9NMkdNIiwibGlmZXRpbWUiOjg2NDMwMC4wfQ.NLOYV52mIgX-axeuMLbMsAdFOTYWy4ZVlviwWZxWaY4\",\n        \"access_expires\": 1764668283,\n        \"refresh_expires\": 1764668280\n    }\n```", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"title": "UserActivate", "required": ["email", "password"], "type": "object", "properties": {"email": {"type": "string", "example": "<user_email>"}, "password": {"type": "string", "example": "nH2qGiehvEXjNiYqp3bOVtAYv...."}}, "in": "formData"}}, {"name": "X-CSRFToken", "in": "header", "required": ["X-CSRFToken"], "type": "string", "example": "nH2qGiehvEXjNiYqp3bOVtAYv....", "title": "CSRF Token"}], "responses": {"201": {"description": "Данные на выходе", "schema": {"type": "object", "properties": {"email": {"type": "string", "example": "email@my.ry"}, "username": {"type": "string", "example": "nH2qGiehvEXjNiYqp3bOVtAYv...."}, "first_name": {"type": "string", "example": ""}, "last_name": {"type": "string", "example": "null"}, "last_login": {"type": "string", "example": "2025-07-20 00:39:14.739 +0700"}, "role": {"type": "string", "example": "staff"}, "is_superuser": {"type": "boolean", "example": false}, "is_admin": {"type": "boolean", "example": false}, "is_staff": {"description": "user got permissions how superuser or not.", "type": "boolean", "example": false}, "is_active": {"type": "boolean", "example": false}, "is_sent": {"type": "boolean", "example": false}, "is_verified": {"type": "boolean", "example": false}, "updated_at": {"type": "string", "example": "2025-07-20 00:39:14.739 +0700"}, "created_at": {"type": "string", "example": "2025-07-20 00:39:14.739 +0700"}, "status": {"type": "string", "example": "-------"}}}, "headers": {"Set-Cookie": {"description": "Access и refresh токены в cookies", "type": "string", "examples": {"access_token": {"summary": "Access токен", "value": "access=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...; Path=/; HttpOnly; Secure; SameSite=Lax"}, "refresh_token": {"summary": "Refresh токен", "value": "refresh=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...; Path=/; HttpOnly; Secure; SameSite=Lax"}}}}}, "401": {"description": "Not Ok"}, "500": {"description": "Something what wrong. Read the response variable 'data'"}}, "tags": ["person"]}, "parameters": []}, "/person/users/": {"get": {"operationId": "person_users_list", "description": "", "parameters": [{"name": "page", "in": "query", "description": "A page number within the paginated result set.", "required": false, "type": "integer"}], "responses": {"200": {"description": "", "schema": {"required": ["count", "results"], "type": "object", "properties": {"count": {"type": "integer"}, "next": {"type": "string", "format": "uri", "x-nullable": true}, "previous": {"type": "string", "format": "uri", "x-nullable": true}, "results": {"type": "array", "items": {"$ref": "#/definitions/User"}}}}}}, "tags": ["person"]}, "post": {"operationId": "person_users_create", "description": "", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/User"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/User"}}}, "tags": ["person"]}, "parameters": []}, "/person/users/{id}/": {"get": {"operationId": "person_users_read", "description": "", "parameters": [], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/User"}}}, "tags": ["person"]}, "put": {"operationId": "person_users_update", "description": "", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/User"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/User"}}}, "tags": ["person"]}, "patch": {"operationId": "person_users_partial_update", "description": "", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/User"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/User"}}}, "tags": ["person"]}, "delete": {"operationId": "person_users_delete", "description": "\nMETHOD: DELETE.\ndescription: You wil can delete the user account only if is:\n    - owner;\n    - admin;\n    - superuser;\nIn the delete event, the user is added to the 'BlackListSerializer' db.\nFully from the database - the user's account can only be deleted by a user with superuser or administrator rights.\n\nA window of time is likely needed to restore the account.\n\nCurrently, the account is being returned to the user with the administrator's assistance.\n", "parameters": [{"name": "id", "in": "path", "type": "string", "example": "c4ebb722-930d-4ad9-ad1e-237eb4b41c70", "title": "Pathname", "required": true}, {"name": "X-CSRFToken", "in": "header", "required": ["X-CSRFToken"], "type": "string", "example": "nH2qGiehvEXjNiYqp3bOVtAYv....", "title": "CSRF Token"}, {"name": "access_token", "in": "cookie", "description": "JWT Access Token", "required": ["access_token"], "type": "string", "example": "nH2qGiehvEXjNiYqp3bOVtAYv....", "title": "Access Token"}, {"name": "refresh_token", "in": "cookie", "description": "JWT Refresh Token", "required": ["refresh_token"], "type": "string", "example": "nH2qGiehvEXjNiYqp3bOVtAYv....", "title": "Refresh Token"}], "responses": {"200": {"description": "OK"}, "401": {"description": "Not OK - you do not have sufficient rights"}, "404": {"description": "User does not exist."}, "500": {"description": "IERROR => ..."}}, "tags": ["person"]}, "parameters": [{"name": "id", "in": "path", "description": "A unique value identifying this Пользователь.", "required": true, "type": "string"}]}, "/person/{id}/inactive/": {"patch": {"operationId": "person_inactive", "description": "\nYou wil can deactivate the user account only if you is:\n- owner;\n- admin;\n- superuser;\nMethod: PATCH.\nPathname: Change a user 'id' from pathname.\n\n\n", "parameters": [{"name": "id", "in": "path", "type": "string", "example": "c4ebb722-930d-4ad9-ad1e-237eb4b41c70", "title": "Pathname", "required": true}, {"name": "X-CSRFToken", "in": "header", "required": ["X-CSRFToken"], "type": "string", "example": "nH2qGiehvEXjNiYqp3bOVtAYv....", "title": "CSRF Token"}, {"name": "access_token", "in": "cookie", "description": "JWT Access Token", "required": ["access_token"], "type": "string", "example": "nH2qGiehvEXjNiYqp3bOVtAYv....", "title": "Access Token"}, {"name": "refresh_token", "in": "cookie", "description": "JWT Refresh Token", "required": ["refresh_token"], "type": "string", "example": "nH2qGiehvEXjNiYqp3bOVtAYv....", "title": "Refresh Token"}], "responses": {"200": {"description": "OK. User was inactive - successfully"}, "401": {"description": "User was inactive before or something what wrong in the request"}, "500": {"description": "IERROR => ..."}}, "tags": ["person"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}}, "definitions": {"Business": {"required": ["name"], "type": "object", "properties": {"id": {"title": "Id", "type": "string", "readOnly": true, "minLength": 1}, "created_at": {"title": "Created_at", "type": "string", "format": "date-time", "readOnly": true}, "updated_at": {"title": "Updated_at", "type": "string", "format": "date-time", "readOnly": true}, "name": {"title": "Business element name", "description": "The business element name", "type": "string", "pattern": "^([A-Z][A-Za-z0-9_]{1,119})$", "maxLength": 120, "minLength": 1}, "descriptions": {"title": "Descriptions", "description": "The business element descriptions", "type": "string", "x-nullable": true}, "code": {"title": "Code", "description": "The business element code", "type": "string", "readOnly": true, "minLength": 1}}}, "User": {"required": ["email", "role", "password_confirm", "password"], "type": "object", "properties": {"id": {"title": "Id", "type": "string", "readOnly": true, "minLength": 1}, "email": {"title": "Email", "type": "string", "format": "email", "minLength": 1}, "role": {"title": "Role", "type": "string", "minLength": 1}, "is_staff": {"title": "Статус персонала", "description": "Отметьте, если пользователь может входить в административную часть сайта.", "type": "boolean"}, "first_name": {"title": "First name", "type": "string", "pattern": "(^$|[A-Za-z]+$)", "maxLength": 50, "x-nullable": true}, "is_superuser": {"title": "Статус суперпользователя", "description": "Указывает, что пользователь имеет все права без явного их назначения.", "type": "boolean"}, "is_active": {"title": "Is active", "type": "boolean"}, "is_sent": {"title": "Message was sent", "description": "Part is registration of new user.It is message sending to user's email. User indicates his email at the registrations moment.", "type": "boolean", "readOnly": true}, "is_verified": {"title": "Is verified", "type": "boolean", "readOnly": true}, "status": {"title": "Status", "type": "string", "enum": ["-------", "PROCESS", "ERROR", "COMPLETED"], "readOnly": true}, "last_name": {"title": "Last name", "type": "string", "pattern": "(^$|[A-Za-z]+$)", "maxLength": 50, "x-nullable": true}, "created_at": {"title": "Created_at", "type": "string", "format": "date-time"}, "updated_at": {"title": "Updated_at", "type": "string", "format": "date-time", "readOnly": true}, "username": {"title": "Username", "type": "string", "readOnly": true, "minLength": 1, "x-nullable": true}, "password_confirm": {"title": "Password confirm", "type": "string", "maxLength": 255, "minLength": 6}, "password": {"title": "Password", "type": "string", "maxLength": 255, "minLength": 6}}}}}